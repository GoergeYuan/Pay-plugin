<?php     /**    * 此页面接收支付结果    */    /* get接收支付返回信息 */    parse_str(base64_decode($_GET['result']),$data);    /* MD5私钥 */    $MD5key     = '12345678';    /* 订单号 */    $BillNo     = $data['BillNo'];    /* 订单金额 */    $Amount     = $data['Amount'];    /* 支付币种 */    $Currency   = $data['Currency'];    /* 支付币种符号 */    $CurrencyName   = $data['CurrencyName'];    /* 支付状态        $Success  88:支付成功  19: 待处理[现在不会返回]  其它状态失败    */    $Succeed    = $data['Succeed'];    /* 支付结果 */    $Result     = $data['Result'];    /* MD5info校验信息 */    $MD5info    = $data['MD5info'];    /* 返回码描述信息（非系统返回，建议不显示给客户，仅作为支付失败问题查找根据） */    $description =  $_GET['description'];        /* 校验源字符串 */        $md5src     = $BillNo . $Currency . $Amount . $Succeed . $MD5key;    /* 校验结果 */    $MD5sign    = strtoupper(md5($md5src));  ?><html>    <head>        <title>Payment Result</title>        <meta http-equiv="Content-Type" content="text/html;charset=utf-8"/>    </head>    <body>        <table class="ftable">            <?php if($MD5info == $MD5sign){ ?>                <tr>                    <td class="fright"><?php echo urldecode($Result); ?></td>                    <td class="fleft"></td>                </tr>                <tr>                    <td class="fright">Your order number:</td>                    <td class="fleft"><?php echo $BillNo; ?></td>                </tr>                <tr>                    <td class="fright">Amount:</td>                    <td class="fleft"><?php echo $Amount; ?></td>                </tr>                <tr>                    <td class="fright">Payment Result:</td>                    <?php if(in_array($Succeed, array("88", "19"))){ ?>                    <?php                     /*                     88为成功， 19为待处理                    可修改订单状态为成功或是待处理，发送支付订单邮件                     */                    ?>                    <td class="fleft" style="color:blue;"><?php echo urldecode($Result); ?></td>                    <?php }else{ ?>                    <?php                     /* 可修改订单状态为失败 */                    ?>                    <td class="fleft" style="color:red;"><?php echo $description; ?>&nbsp;&nbsp;&nbsp;&nbsp;<?php echo $Succeed; ?></td>                    <?php } ?>                </tr>            <?php }else{ ?>                <tr>                    <td align="center" valign="top" style="color:red;">Validation failed!</td>                </tr>            <?php } ?>            </table>            <p align="center"><a href="#" onClick="javascript:window.close()"><font size=2 color=blove>Close</font></a></p>    </body></html>